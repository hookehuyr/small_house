<style lang="less">
</style>

<script>
import wepy from '@wepy/core';
import eventHub from './common/eventHub';
import vuex from '@wepy/x';

wepy.use(vuex);


wepy.app({
  hooks: {
    // App 级别 hook，对整个 App 生效
    // 同时存在 Page hook 和 App hook 时，优先执行 Page hook，返回值再交由 App hook 处
    'before-setData': function (dirty) {
      // console.log('setData dirty: ', dirty);
      return dirty;
    }
  },
  globalData: {
    userInfo: null,
    userAuth: {}
  },

  onLaunch() {
    // this.testAsync();
    // eventHub.$on('app-launch', (...args) => {
    //   console.log('app-launch event emitted, the params are:');
    //   console.log(args);
    // });
    // 需要初始化云服务
    wx.cloud.init({
      env: 'small-house-hhf1r',
      traceUser: true,
      database: '', // 数据库 API 默认环境配置
      storage: '', // 存储 API 默认环境配置
      functions: '' // 云函数 API 默认环境配置
    });
    // 查询获取用户那些权限
    wx.getSetting()
    .then(res => {
      if (res.errMsg === 'getSetting:ok') {
        this.$options.globalData.userAuth = res.authSetting;
      }
    })
    .catch(error => {
      console.error(error);
    })
  },

  methods: {

  }
});
</script>
<config>
{
    pages: [
      'pages/index',
      'pages/me',
      'pages/schedule',
    ],
    window: {
      backgroundTextStyle: 'light',
      navigationBarBackgroundColor: '#fff',
      navigationBarTitleText: 'WeChat',
      navigationBarTextStyle: 'black',
      enablePullDownRefresh: true,
      onReachBottomDistance: 50,
    },
    permission: {
      'scope.userLocation': {
        desc: '您的位置信息将用于导航位置定位'
      }
    },
    "tabBar": {
      "custom": true,
      "color": "#7A7E83",
      "selectedColor": "#FF6600",
      "borderStyle": "black",
      "backgroundColor": "#ffffff",
      "list": [
        {
          "pagePath": "pages/index",
          "iconPath": "static/icon/homepage.png",
          "selectedIconPath": "static/icon/homepage_fill.png",
          "text": ""
        },
        {
          "pagePath": "pages/me",
          "iconPath": "static/icon/people.png",
          "selectedIconPath": "static/icon/people_fill.png",
          "text": ""
        }
      ],
      position: 'bottom'
    },
    usingComponents: {
      'van-button': '../static/vant/button/index',
      'van-field': '../static/vant/field/index',
      'van-cell': '../static/vant/cell/index',
      'van-cell-group': '../static/vant/cell-group/index',
      'van-image': '../static/vant/image/index',
      'van-dialog': '../static/vant/dialog/index',
      'van-grid': '../static/vant/grid/index',
      'van-grid-item': '../static/vant/grid-item/index',
      'van-icon': '../static/vant/icon/index',
      'van-calendar': '../static/vant/calendar/index',
      'van-panel': '../static/vant/panel/index',
      'custom-tab-bar': 'components/custom-tab-bar'
    }

}
</config>
